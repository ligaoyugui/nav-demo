<!DOCTYPE html>
<html lang="zh-Hans">
<head>
    <meta charset="UTF-8">
    <title>我的导航</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <header></header>
    <main>
      <div class="wrapper" id="main1">

      </div>
    </main>
    <footer></footer>
    <script>
        var keys = {
            '0': {0:'q',1:'w',2:'e',3:'r',4:'t',5:'y',6:'u',7:'i',8:'o',9:'p',length:10},
            '1': {0:'a',1:'s',2:'d',3:'f',4:'g',5:'h',6:'j',7:'k',8:'l',length:9},
            '2': {0:'z',1:'x',2:'c',3:'v',4:'b',5:'n',6:'m',length:7},
            'length': 3
        }
        var hash = {
            'q': 'qq.com',
            'w': 'weibo.com',
            'e': 'ele.me',
            'r': 'renren.com',
            't': 'tianya.com',
            'y': 'youtube.cn',
            'u': 'uc.com',
            'i': 'iqiyi.com',
            'o': 'opera.com',
            'p': undefined,
            'a': 'acfun.tv',
            's': 'sohu.com',
            'm': 'mcdonalds.com'

        }   //遍历keys,生成kbd标签
        var hashInlocalStorage = JSON.parse(localStorage.getItem('uuu') || 'null')//取出localStorage中的uuu对应的hash
        if(hashInlocalStorage){
            hash = hashInlocalStorage
        }
        index =0
        while(index< keys['length']){
            div1 = document.createElement('div')
            div1.className = "row"
            main1.appendChild(div1)
            row=keys[index]       //第一个数组 第二个数组 第三数组
            index2 =0
            while(index2< row['length']){     // 0-9  0-8  0-6
                kbd1 = document.createElement('kbd')
                span = document.createElement('span')
                span.textContent=row[index2]
                span.className = "text"
                kbd1.appendChild(span)
                kbd1.className = "key"
                button1 = document.createElement('button')
                button1.textContent ='编辑'
                button1.id = row[index2]
                img = document.createElement('img')
                if(hash[row[index2]]){
                    img.src = 'http://'+hash[row[index2]]+'/favicon.ico'
                }else{
                    img.src = './img/警示.png'
                }
            img.onerror = function(qqq){
                qqq.target.src = './img/警示.png'
            }

                button1.onclick = function(chong){
                    key = chong['target']['id']   //targei可以按照哈希算法顺序指定命名的按键
                    x = prompt('给我一个网址')
                    hash[key] = x   //hash变更
                    localStorage.setItem('uuu', JSON.stringify(hash))   //只要hash变了，就存到“uuu”里面
                    console.log(hash)
                }
                kbd1.appendChild(img)
                kbd1.appendChild(button1)
                div1.appendChild(kbd1)
                index2 = index2 + 1
            }
            index =index+1
        }   //两层while循环
        document.onkeypress =function(chong){
            key = chong['key']
            website = hash[key]
            console.log(website)
            //location.href = 'http://'+website
            window.open('http://'+website, '_blank')
        }
    </script>
</body>
</html>